Materials and methods Reagent type (species) or resource Designation Source or reference Identifiers Additional information. Strain, strain background (Bacillus velezensis) SQR9 Lab strain CGMCC accession No. 5808. Strain, strain background (Bacillus velezensis) FZB42 Chen et al., 2007 BGSC accession no. 10A6. Strain, strain background (Escherichia coli) Top 10 Invitrogen  Host for plasmids. Strain, strain background (Escherichia coli) BL21 (DE3) Invitrogen  For recombinant protein expression. Recombinant DNA reagent pNW33n(plasmid) Zhou et al., 2018  B. subtilis-E. coli shuttle vector. Gene (Bacillus velezensis) spo0A GenBank V529_25300. Gene (Bacillus velezensis) bnaA GenBank V529_06410. Gene (Bacillus velezensis) bnaB GenBank V529_06420. Gene (Bacillus velezensis) bnaV GenBank V529_06620. Software, algorithm FlowJo V10 FlowJo V10. Software, algorithm SPSS SPSS. Other Propidium iodide Invitrogen L7012 (20 mM). Bacterial strains and growth conditions The strains and plasmids used in this study are listed in Supplementary file 1a. Bacillus velezensis SQR9 (formerly B. amyloliquefaciens SQR9, China General Microbiology Culture Collection Center (CGMCC) accession no. 5808) was used throughout this study. B. velezensis FZB42 (Bacillus Genetic Stock Center (BGSC) accession no. 10A6) was used to test the BAs production by wild-type SQR9 and its mutants. Escherichia coli TOP 10 (Invitrogen, Shanghai, China) was used as the host for all plasmids. E. coli BL21 (DE3) (Invitrogen, Shanghai, China) was used as the host for recombinant protein expression. All strains were routinely grown at 37 °C in low-salt Luria-Bertani (LLB) medium (10 g L–1 peptone, 5 g L–1 yeast extract, 3 g L–1 NaCl). For biofilm formation, B. velezensis SQR9 and its mutants were cultivated in MSgg medium (5 mM potassium phosphate, 100 mM morpholine propanesulfonic acid, 2 mM MgCl2, 700 μM CaCl2, 50 μM MnCl2, 50 μM FeCl3, 1 μM ZnCl2, 2 mM thiamine, 0.5% glycerol, 0.5% glutamate, 50 μg of tryptophan per milliliter, 50 μg of phenylalanine per milliliter, and 50 μg of threonine per milliliter) at 37 °C (Branda et al., 2001). To collect the fermentation supernatant for antagonism assessment, B. velezensis SQR9 and its mutants were cultured in Landy medium (Landy et al., 1947) containing 20 g L–1 glucose and 1 g L–1 yeast extract. When necessary, antibiotics were added to the medium at the following final concentrations: zeocin, 20 μg mL–1; spectinomycin, 100 μg mL–1; kanamycin, 30 μg mL–1; ampicillin, 100 μg mL–1; chloramphenicol, 5 μg mL–1 for B. velezensis strains and 12.5 μg mL–1 for E. coli strains; erythromycin, 1 μg mL–1 for B. velezensis strains and 200 μg mL–1 for E. coli strains. The medium was solidified with 2% agar. Reporter construction For single-labeled strain, the promoter region of the testing gene and gfp fragment were fused through overlap PCR, and this transcriptional fusion was cloned into vector pNW33n using primers listed in Supplementary file 1b. For double-labeled strains, one promoter region was fused with gfp fragment, and the other promoter region was fused with the mCherry fragment. The two fusions were then fused in opposite transcription directions and cloned into vector pNW33n using primers listed in Supplementary file 1b. All constructions were transferred into competent cells of B. velezensis SQR9 and mutants when required. Promoter replacement Strain SQR9-Pxyl-accDA was constructed by replacing the original promoter of accDA (PaccDA) with a xylose-inducible promoter Pxyl. The approximately 800 bp fragments upstream and downstream of the PaccDA region were amplified from the genomic DNA of strain SQR9; the Spcr fragment was amplified from plasmid P7S6 (Feng et al., 2018), and the Pxyl promoter was amplified from the plasmid PWH1510 (Xu et al., 2019a). The four fragments were fused using overlap PCR in the order of the upstream fragment, Spcr, Pxyl, and the downstream fragment. The fusion was transferred into competent cells of B. velezensis SQR9 for generating transformants. Strain SQR9-P43-bnaAB was obtained by replacing the original promoter (PbnaAB) with a constitutive promoter P43. The primers used for constructing the four-fragment fusion are listed in Supplementary file 1b. Fluorescence microscopy Cells were inoculated from a fresh pre-culture and grown to mid-exponential growth at 37 °C in an LLB medium. Bacterial cultures were centrifuged at 4000 × g for 5 min, the pellets were washed and suspended in liquid MSgg to reach an OD600 of 1.0. One μL suspension was placed on a solid MSgg medium and was cultured at 37 °C for 12 h. Agarose MSgg pads were then inverted on a glass bottom dish (Nest). Cells were imaged using the Leica TCS SP8 microscope with the 63x oil-immersion objective lens. For GFP observation, the excitation wavelength was 488 nm and the emission wavelength was 500~560 nm; for mCherry observation, the excitation wavelength was 587 nm and the emission wavelength was 590~630 nm. Wild-type biofilms containing no fluorescent fusions were analyzed to determine the background fluorescence. The number of cells emitting mCherry, GFP, or both fluorescence was also collected for calculating the proportion; each treatment includes six biological replicates. For the time-lapse experiment, after staining with propidium iodide (PI) for 15 min, images of early-stage biofilms on the agarose pad were recorded for 3 hr, with an interval of 3 min. Image acquisitions were also performed with the Leica TCS SP8 microscope with the 63x oil-immersion objective lens. Detectors and filter sets for monitoring of GFP and PI (excitation wavelength of 536 nm and emission wavelength of 608~652 nm) were used. Flow cytometry Biofilms of 16 hr were collected and re-suspended in 1 mL PBS buffer, and single cells were obtained after mild sonication. Cells were centrifuged at 4000 × g for 5 min and washed briefly with PBS. For flow cytometry, cells were diluted to 1:100 in PBS and measured on BD FACSCanto II. For GFP fluorescence, the laser excitation was 488 nm and coupled with 500–560 nm. For assessment of the double-labeled strains, cells were diluted to 1:100 in PBS and measured on BD FACS Symphony SORP. For GFP fluorescence, the laser excitation was 488 nm coupled with 530/30 and 505LP sequential filters; for mCherry fluorescence, the laser excitation was 561 nm coupled with 610/20 and 600LP sequential filters. Every replicate was analyzed for 20,000 events. FlowJo V10 software was used for data analysis and graph creating. Three replicates were analyzed for each treatment. Preparation of the BAs extract The BAs extract was prepared by thin layer chromatography (TLC). According to a previous study (Wang et al., 2019), the fermentation supernatant of strain SQR9 was separated on a TLC plate, and the inhibition zone on the lawn of strain FZB42 indicated the position of BAs. Then, silica gel powder with BAs was scraped and extracted by MeOH, which was used as the BAs extract. Oxford cup assay Inhibition of different SQR9-derived mutants on B. velezensis FZB42 was evaluated by the Oxford cup method. The suspension of strain FZB42 (~106 CFU mL–1) was spread onto LLB plates (10 × 10 cm) to grow as a bacterial lawn. A volume of 100 μL BAs extract produced by different mutants was injected into an Oxford cup on the lawn of strain FZB42. The plates were placed at 22 °C until a clear zone formed around the cup, and the inhibition diameter was scored. Each treatment includes three biological replicates. BAs-sensitivity assessment Cells were inoculated from a fresh pre-culture and grown to mid-exponential growth at 37 °C in an LLB medium. Afterward, diluted cell suspension (~106 CFU mL–1) was spread onto LLB plates to grow as a bacterial lawn. A volume of 100 μL BAs extracts from the wild-type SQR9 was injected into an Oxford cup on the lawn. The plates were placed at 22 °C for observation and determination of the inhibition zone. Each treatment includes three biological replicates. Biolayer interferometry (BLI) measurements To confirm whether Spo0A can bind PbnaF directly, determination of binding kinetics was performed on an Octet RED96 device (ForteBio, Inc, Menlo Park, US) at 25 °C with orbital sensor agitation at 1000 rpm. Streptavidin (SA) sensor tips (ForteBio) were used to immobilize 100 nM biotin-labeled PbnaF. Then, a baseline measurement was performed in the buffer PBST (PBS, 0.1% BSA, 0.02% Tween-20) for 300 s. The binding of Spo0A at different concentrations (100 nM, 250 nM, 500 nM, and 1000 nM) to PbnaF was recorded for 600 s followed by monitoring protein dissociation using PBST for another 600 s. The BLI data for each binding event was summarized as an ‘nm shift’ (the wavelength/spectral shift in nanometers) and KD values were determined by fitting to a 1:1 binding model. Promoter activity testing via fluorescence intensity For colony fluorescence, cells were inoculated from a pre-culture into a fresh LLB medium and grown at 37 °C with 170 rpm shaking until OD600 reached 0.5. One μL of the suspension was inoculated on a solid LLB medium and cultured at 37 °C. Colony morphology and fluorescence were recorded by the stereoscope. ImageJ software was used to measure GFP intensity. For liquid culture fluorescence, overnight cultures were transferred to a fresh LLB medium. Fluorescence intensity was determined by a microtiter plate reader. Each treatment includes three biological replicates. Xylose induction assay For the xylose-induced BAs production assay, 30 μL overnight culture of SQR9-Pxyl-accDA or wild-type SQR9 was transferred respectively into 3 mL fresh LLB liquid with different concentrations of xylose (0%, 0.1%, and 0.2%) and incubated at 37 °C, 170 rpm for 24 hr. Cell suspensions were adjusted to the same OD600 and were centrifuged at 12,000 × g for 1 min. The cell-free supernatant was mixed with MeOH (volume ratio 2:1) to extract BAs. A volume of 100 μL extract was injected into an Oxford cup on the lawn of strain FZB42 (as described above). The plates were placed at 22 °C. For the xylose-induced self-immunity assay, strain SQR9-Pxyl-accDA was grown in LLB without xylose for 24 hr. The cell suspension was spread onto LLB plates containing different concentrations of xylose (0%, 0.1%, and 0.2%) to grow as the lawn. A volume of 100 μL (1x) or 200 μL (2x) BAs extract from the wild-type SQR9 was injected into an Oxford cup on the lawn. The plates were placed at 22 °C. For xylose-induced gene expression assay, cells were inoculated from a pre-culture into fresh LLB medium with different concentrations of xylose (0%, 0.1%, and 0.2%), and were grown at 37 °C with 170 rpm shaking until OD600 reached 0.5. One μL of suspension was inoculated on a solid LLB medium and was cultured at 37 °C, colony morphology and fluorescence were recorded by the stereoscope. Each treatment in these assays includes three biological replicates. Biofilm formation Cells were inoculated from a fresh pre-culture and grown to mid-exponential growth at 37 °C in an LLB medium. Bacterial cultures were centrifuged at 4000 × g for 5 min, the pellets were washed and suspended in MSgg medium to an OD600 of 1.0. For colony observation, 1 μL of suspension was inoculated on a solid MSgg medium and cultured at 37 °C, then the colony morphology was recorded by the stereoscope. For pellicle observation, the suspension was inoculated into MSgg medium with a final concentration of 1% in a microtiter plate well, and the cultures were incubated at 37 °C without shaking. Besides, the ability of the strain to form biofilm under stress was measured in the 48-well microtiter plate according to the method described above. When required, reagents that simulate stress were supplemented in the MSgg medium before inoculating, including oxidative stress (0.0025% H2O2), salt stress (7% NaCl), acid stress (pH 5), alkaline stress (pH 8), and antibiotic stress (4 µg mL–1 tetracycline or 20 µg mL–1 streptomycin). The amount of reagent added was determined according to a concentration gradient in the pre-experiment, and a concentration was chosen to inhibit wild-type growth without killing it. At different stages of biofilm development (initiation, progress, maturity, and dispersal), the MSgg medium underneath the biofilm was carefully removed by pipetting, and then the biofilm was taken and weighed. Each treatment includes three biological replicates. Root colonization assay in hydroponic culture The bacterial suspension was inoculated into 1/4 Murashige-Skoog medium to make the final OD600 value to be 0.1, into which sterile cucumber seedlings with three true leaves were immersed. After being cultured with slowly shaking for two days, cells colonized on cucumber roots were determined by plate colony counting. In detail, roots were washed eight times in PBS to remove free and weakly attached bacterial cells. After vortexing for 5 min, until colonized bacteria were detached from roots, 100 μL of the bacterial suspension was plated onto LLB agar plates for quantification. Each treatment includes three biological replicates. Measurement of public goods production Qualitative measurement of proteases production was done by inoculating 1 μL of bacterial suspension on a solid 2% skim milk medium and cultured at 30 °C until a transparent zone formed around colonies; quantitative measurements of alkaline protease and neutral protease activity were conducted according to a previous study (Kunitz, 1947). Qualitative and quantitative measurements of siderophore production were based on the universal chemical assay described by Schwyn and Neilands, 1987. Each treatment includes three biological replicates.